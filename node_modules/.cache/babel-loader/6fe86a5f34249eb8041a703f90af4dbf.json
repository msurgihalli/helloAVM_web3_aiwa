{"ast":null,"code":"/*\n * Copyright (c) 2017-2018 Aion foundation.\n *\n *     This file is part of the aion network project.\n *\n *     The aion network project is free software: you can redistribute it \n *     and/or modify it under the terms of the GNU General Public License \n *     as published by the Free Software Foundation, either version 3 of \n *     the License, or any later version.\n *\n *     The aion network project is distributed in the hope that it will \n *     be useful, but WITHOUT ANY WARRANTY; without even the implied \n *     warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  \n *     See the GNU General Public License for more details.\n *\n *     You should have received a copy of the GNU General Public License\n *     along with the aion network project source files.  \n *     If not, see <https://www.gnu.org/licenses/>.\n *\n * Contributors:\n *     Aion foundation.\n */\n\"use strict\";\n\nvar _classCallCheck = require(\"/home/jennifer/AVM_ALL/avm_web3_aiwa/avm_web3/avm-example/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/jennifer/AVM_ALL/avm_web3_aiwa/avm_web3/avm-example/node_modules/@babel/runtime/helpers/createClass\");\n\nvar fs = require('fs');\n\nvar ABI = require('aion-web3-codec');\n\nvar Contract =\n/*#__PURE__*/\nfunction () {\n  function Contract() {\n    _classCallCheck(this, Contract);\n\n    this._abi = new ABI();\n    this._initializer = null;\n    this._argsData = null;\n    this._jarPath = null;\n    this._method = null;\n    this._values = [];\n    this._types = [];\n  } // Converts the Jar into a JarPath to be Encoded for Initialization\n\n\n  _createClass(Contract, [{\n    key: \"deploy\",\n    value: function deploy(jar) {\n      this._jarPath = fs.readFileSync(jar);\n      return this;\n    } // Defines the Arguments of a AVM Contract's Initializer\n\n  }, {\n    key: \"args\",\n    value: function args(types, values) {\n      if (this._jarPath === null) {\n        throw new Error('requires a jarFile to be set first through the deploy method');\n      }\n\n      this._argsData = this._abi.encode(types, values);\n      return this;\n    } // Initialize \n\n  }, {\n    key: \"init\",\n    value: function init() {\n      if (this._jarPath === null) {\n        throw new Error('requires a jarFile to be set first through the deploy method');\n      }\n\n      if (this._argsData === null) {\n        this._argsData = this._abi.encode([], []);\n      }\n\n      this._initializer = this._abi.readyDeploy(this._jarPath, this._argsData);\n      console.log(\"Deploying AVM Contract...\");\n      return this._initializer;\n    } // Sets the Method you wish to Call\n\n  }, {\n    key: \"method\",\n    value: function method(_method) {\n      this._method = _method;\n      return this;\n    } // Sets the Params of the Method you wish to Call\n\n  }, {\n    key: \"inputs\",\n    value: function inputs(types, values) {\n      if (this._method === null) {\n        throw new Error('a method must be set first');\n      }\n\n      this._values = values;\n      this._types = types;\n      return this;\n    } // Encodes the Method Call\n\n  }, {\n    key: \"encode\",\n    value: function encode() {\n      if (this._method === null) {\n        throw new Error('a method must be set first');\n      }\n\n      return this._abi.encodeMethod(this._method, this._types, this._values);\n    } // Decodes some data returned for a Method\n\n  }, {\n    key: \"decode\",\n    value: function decode(type, data) {\n      return this._abi.decode(type, data);\n    }\n  }]);\n\n  return Contract;\n}();\n\nmodule.exports = Contract;","map":null,"metadata":{},"sourceType":"script"}